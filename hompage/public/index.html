<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="reset.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-iropke-batang/1.2/font-iropke-batang.css">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    
    <script src="https://kit.fontawesome.com/6c65716ce4.js" crossorigin="anonymous"></script>
    <style>

    </style>
    
    <title>모바일청첩장</title>
</head>
<body>
    <div class="container mcard-view">
        <div class="volume-container">
            <i class="fa-solid fa-volume-high"></i>
        </div>
        <div class="wrapper-intro p-5">
            <div class="intro-text text-center fs-3 crimson">
                <span>24</span>
                <span>11</span>
                <span>20</span>    
            </div>
            <div class="intro-text text-center fs-6 crimson">
                <span>WendsDay</span>
            </div>
            <div class="mb-3 d-flex justify-content-center">
                <img  class="rounded-1" style="max-width: 500px; width: 100%;" src="images/outside_together.jpg" alt="">
            </div>
            <div class="name container text-center mb-3">
                <span>김세훈</span>
                <div data-v-80a91836="" class="divider"></div>
                <span>고지희</span>
            </div>
            <div class="text-center"> 
                <p class="mb-1">2024년 11월 20일 수요일 오후 7시</p>
                <p>제주 메종드글래드 B2 홀</p>
            </div>
            <div class="mb-3">
                <div class="icon-flower"></div>
            </div>
            <div class="text-center">
                <p class="mb-1">두 사람의 꽃과 나무처럼 걸어와서</p>
                <p class="mb-1">서로의 모든 것이 되기 위해</p>
                <p class="mb-1">오랜 기다림 끝에 혼례식을 치르는날</p>
                <p class="mb-5">세상은 더욱 아름다워라</p>
                <p class="mb-5">이해인, <사랑의 사람들이여></p>
            </div>

            <div class="invitation text-center">
                <div class="container-title">
                    <h2 class="sub-title en fs-6 mb-1 crimson">INVITATION</h2>
                    <h2 class="title fs-5 mb-5 ">소중한 분들을 초대합니다</h2> 
                </div>
                <div class="m-5 fs-6 fade-in">
                    <p class="mb-1">살랑이는 바람결에</p>
                    <p class="mb-1">사랑이 묻어나는 계절입니다.</p>
                    <p class="mb-1">여기 곱고 예쁜 두사람이 <em>사랑</em>을 맺어</p>
                    <p class="mb-1">인생의 반려가 되려 합니다.</p>
                    <p class="mb-1">새 인생을 시작하는 이 자리에 오셔서</p>
                    <p class="mb-1"><em>축복</em>해 주시면 감사하겠습니다.</p>
                </div>
                <div class="mx-3 mb-3">
                    <img class="rounded-1" src="images/main_photo.jpg" alt="웨딩 사진">
                </div>
                <div class="parant-container">
                    <span>김재경</span>
                    <span>·</span>
                    <span>진미영</span>
                    <span class="relation">의 아들</span>
                    <span>김세훈</span>
                </div>
                <div class="parant-container">
                    <span>고성동</span>
                    <span>·</span>
                    <span>김은주</span>
                    <span class="relation">의 딸</span>
                    <span>고지희</span>
                </div>
                <button type="button" class="btn btn-outline-primary btn-call rounded-5">
                    <i class="fa-solid fa-phone"></i>
                    연락하기
                </button>
            </div>
    </div>
        <div class="cal-container p-5">
            <p class="crimson text-date">2024.11.20</p>
            <p class="text-hours mb-3">토요일 오후 1시 30분</p>
            <div class="cal-table-container">
                <table class="calendar">
                    <thead>
                        <tr>
                            <th>
                                <span class="sunday">일</span>
                            </th>
                            <th>월</th>
                            <th>화</th>
                            <th>수</th>
                            <th>목</th>
                            <th>금</th>
                            <th>토</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="sunday"></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <span>1</span>
                            </td>
                            <td>
                                <span>2</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="sunday">
                                <span>
                                    3
                                </span>
                            </td>
                            <td>
                                <span>4</span>
                            </td>
                            <td>
                                <span>5</span>
                            </td>
                            <td>
                                <span>6</span>
                            </td>
                            <td>
                                <span>7</span>
                            </td>
                            <td>
                                <span>
                                    8
                                </span>
                            </td>
                            <td>
                                <span>9</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="sunday">
                                <span>10</span>
                            </td>
                            <td>
                                <span>11</span>
                            </td>
                            <td>
                                <span>12</span>
                            </td>
                            <td>
                                <span>13</span>
                            </td>
                            <td>
                                <span>14</span>
                            </td>
                            <td>
                                <span>15</span>
                            </td>
                            <td>
                                <span>16</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="sunday">
                                <span>17</span>
                            </td>
                            <td>
                                <span>18</span>
                            </td>
                            <td>
                                <span>19</span>
                            </td>
                            <td class="day-td">
                                <div class="d-day">
                                    <span>20</span>
                                </div>
                            </td>
                            <td>
                                <span>21</span>
                            </td>
                            <td>
                                <span>22</span>
                            </td>
                            <td>
                                <span>23</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="sunday">
                                <span>24</span>
                            </td>
                            <td>
                                <span>25</span>
                            </td>
                            <td>
                                <span>26</span>
                            </td>
                            <td>
                                <span>27</span>
                            </td>
                            <td>
                                <span>28</span>
                            </td>
                            <td>
                                <span>29</span>
                            </td>
                            <td>
                                <span>30</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="dday-wrap">
                <div class="countdown crimson">
                    <div>
                        <span class="card">108</span>
                        <div class="desc">Days</div>
                    </div> 
                    <div>
                        <span>:</span>
                    </div>
                     <div>
                        <span class="card">11</span>
                        <div class="desc">Hour</div>
                    </div>
                     <div>
                        <span>:</span>
                    </div>
                     <div>
                        <span class="card">51</span>
                        <div class="desc">Min</div>
                    </div>
                     <div>
                        <span>:</span>
                    </div>
                     <div>
                        <span class="card">12</span>
                        <div class="desc">Sec</div>
                    </div></div>
                <p>세훈 ❤️ 지희의 결혼식이 <span style="color: pink;">108일</span> 남았습니다.</p>
            </div>
        </div>
        <div class="gallary-container container text-center p-5">
            <h2 class="sub-title en fs-6 mb-1 crimson">GALLARY</h2>
            <h2 class="title fs-5 mb-5">갤러리</h2>

            <div class="row row-cols-2">
                <div class="col-6 p-3 img-wrapper">
                    <img class="rounded-3 h-100 border border-white" src="images/wife_solo.jpg" alt="">
                </div>
                <div class="col-6">
                    <div class="p-3 img-wrapper">
                        <img class="rounded-3 border border-white" src="images/outside4.jpg" style="height: 20rem; background-size: cover;" alt="">
                    </div>
                    <div class="p-3 img-wrapper">
                        <img class="rounded-3 border border-white" src="images/outside3.jpg" style="height: 16rem; background-size: cover;"alt="">
                    </div>
                </div>
            </div>

            <div class="row row-cols-2">
                <div class="col-6">
                    <div class="p-3 img-wrapper">
                        <img class="rounded-3 h-100 =border border-white" src="images/outside5.jpg" alt="">
                    </div>
                    <div class="p-3 img-wrapper">
                        <img class="rounded-3 h-100 border border-white" src="images/outside7.jpg" alt="">
                    </div>
                </div>
                <div class="col-6 rounded-1 p-3 img-wrapper">
                    <img class="rounded-3 h-100 border border-white" src="images/man-solo.jpg" alt="">
                </div>
            </div>

            <div class="row row-cols-2">
                <div class="col-6 p-3 img-wrapper">
                    <img class="rounded-3 h-100 border border-white" src="images/night_together.jpg" alt="">
                </div>
                <div class="col-6">
                    <div class="p-3 img-wrapper">
                        <img class="rounded-3 h-100 border border-white" src="images/night_together2.jpg" alt="">
                    </div>
                    <div class="rounded-1 p-3 img-wrapper">
                        <img class=" rounded-3 h-100 border border-white" src="images/night_together3.jpg" alt="">
                    </div>
                </div>
            </div>

            <div class="row row-cols-2">
                <div class="col-6">
                    <div class="rounded-1 p-3 img-wrapper">
                        <img class="rounded-3 h-100 border border-white" src="images/한복.jpg" alt="">
                    </div>
                    <div class="rounded-1 p-3 img-wrapper">
                        <img class="rounded-3 h-100 border border-white" src="images/한복3.jpg" alt="">
                    </div>
                </div>
                <div class="col-6 rounded-1 p-3 img-wrapper">
                    <img class="rounded-3 h-100 border border-white" src="images/한복2.jpg" alt="">
                </div>
            </div>


            
            <div>
                <button type="button" class="btn btn-outline-primary btn-call rounded-5">
                    <i class="fa-solid fa-angle-down"></i>
                    사진 더보기
                </button>
            </div>
        </div>

        <div class="container text-center">
            <h2 class="sub-title en fs-6 mb-1 crimson">LOCATION</h2>
            <h2 class="title fs-5 mb-5">오시는 길</h2>
            <p>메종글래드 B2 홀</p>
            <p>제주특별자치도 제주시 노연로 80</p>
        </div>

        <div class="d-flex justify-content-center">
            <div class="map-container" style="max-width: 300px;">
                <div id="map" style="width:300px; height:400px;">
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center map-btn-container mt-3">
            <div>
                <button class="btn-naver btn btn-outline-primary mx-1">네이버맵</button>
            </div>
            <div>
                <button class="btn-kakao btn btn-outline-primary  mx-1">카카오맵</button>
            </div>
            <div>
                <button class="btn-tmap btn btn-outline-primary  mx-1">티맵</button>
            </div>
        </div>

        <div class="container mt-5 road-container" style="width: 500px;">
            <div class="row">
                <div class="col-4 d-flex justify-content-center">
                    <div class="icon-circle">
                        <i class="fa-solid fa-bus"></i>
                    </div>
                </div>
                <div class="col-8">
                    <h3 class="title fs-6">버스</h3>
                     <p>제원사거리 버스정류장</p>
                     <p>121, 141, 145, 148, 463</p>
    
                     <p>메종글래드 버스정류장</p>
                     <p>2015, 2234, 2413</p>
                </div>
            </div>
        </div>
        <div class="container mt-3 mb-5" style="width: 500px">
            <div class="row">
                <div class="col-4 d-flex justify-content-center">
                    <div class="icon-circle">
                        <i class="fa-solid fa-square-parking"></i>
                    </div>
                </div>
                <div class="col-8">
                    <h3 class="title fs-6">주차 안내</h2>
                    <p>건물 내 B3-B7 2시간 무료주차</p>
                    <p>안내 데스크에서 주차권 수령</p>
                </div>
            </div>
        </div>
        <div class="text-center info-container p-4 m-1">
            <p class="sub-title en fs-6 mb-1 crimson">INFORMATION</p>
            <h2 class="title fs-5 mb-4">예식정보 및 안내사항</h2>
            <div class="d-flex justify-content-center">
                <div class="p-3" style="max-width: 490px;">
                    <div class="card text-center p-1">
                        <div class="card-header card-background rounded-top">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                            <a class="nav-link active">포토부스</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link">식사안내</a>
                            </li>
                            <li class="nav-item">
                            <a class="nav-link">주차안내</a>
                            </li>
                        </ul>
                        </div>
                        <div class="card-body m-3">
                            <img src="images/photo.jpg" alt="">
                            <p class="card-text">포토부스가 설치될 예정입니다.</p>
                            <p class="card-text">귀한 발검음 해주신 여러분의</p>
                            <p class="card-text">환한 미소와 따뜻한 말씀 남겨주시면</p>
                            <p class="card-text">소중히 간직하도록 하겠습니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex flex-column align-items-center">
            <div class="d-flex align-items-center card text-center mb-5" style="width: 18rem;">
                <span class="card-title card-span">피로연 안내</span>
                <div class="card-body">
                  <p class="card-text">예식에 참석하기 어려운 분들을 위해</p>
                  <p class="card-text">작은 피로연 자리를 마련했습니다.</p>
                  <p class="card-text">제주시 서광로 112, 아젠토 피오레</p>
                  <p class="card-text">2024.11.20</p>
                  <a href="#" class="btn btn-outline-primary">피로연장 지도 보기</a>
                </div>
              </div>

              <div class="d-flex align-items-center card text-center mb-3" style="width: 18rem;">
                <span class="card-title card-span">참석 의사 전달</span>
                <div class="card-body">
                  <p class="card-text">축하의마음으로 참석해주시는</p>
                  <p class="card-text">모든 분들을 귀하게 모실 수 있도록</p>
                  <p class="card-text">참석 의사를 전달 부탁드립니다.</p>
                  <a href="#" class="btn btn-outline-primary">참석의사 전달하기</a>
                </div>
              </div>
        </div>

        <div class="c-account fade-in" style="opacity: 1;transform: translate(0px, 0px);">
            <div class="item">
                <div class="title">
                    <div>
                        신랑측 계좌번호
                    </div>
                    <div class="arrow-up-man arrow" onclick="showManTogle()">
                        <i class="fa-solid fa-chevron-down arrow"></i>
                    </div>
                </div>
                <div class="text gothic man-account" style="height: 0px; display: none;" >
                    <div class="inner">
                        <span>
                            <span class="bank">신한</span>
                            <span>110-123-456789</span>
                        </span>
                        <br>
                        <span>김세훈</span>
                    </div>
                    <div>
                        <div class="btn-action">
                            복사
                        </div> 
                    </div>
                </div>
                <div class="text gothic man-account" style="height: 0px; display: none;">
                    <div class="inner">
                        <span>
                            <span class="bank">신한</span>
                            <span>110-123-456789</span>
                        </span><br>
                        <span>김재경</span>
                    </div>
                    <div>
                        <div class="btn-action">
                            복사
                        </div>
                    </div>
                </div>
            </div>
            <div class="item">
                <div class="title">
                    <div>
                        신부측 계좌번호
                    </div>
                    <div class="arrow-up-woman arrow" onclick="showWomanToggle()">
                        <i class="fa-solid fa-chevron-down arrow"></i>
                    </div>
                </div>
                <div class="text gothic woman-account" style="height: 0px; display: none;">
                    <div class="inner">
                        <span>
                            <span class="bank">국민</span>
                            <span>200123-45-678900</span>
                        </span><br>
                        <span>고지희</span>
                    </div>
                    <div>
                        <div class="btn-action">복사</div>
                    </div>
                </div>
                <div class="text gothic woman-account" style="height: 0px; display: none;">
                    <div class="inner">
                        <span>
                            <span class="bank">신한</span>
                            <span>110-123-456789</span>
                        </span><br>
                        <span>고성동</span>
                    </div>
                    <div>
                        <div class="btn-action">복사</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-5 p-5">
            <span>GUESTBOOK</span>
            <h3>방명록</h3>
            <div class="container-guestbook mt-5">
                <div class="empty">
                    <i class="fa-solid fa-file-signature"></i>
                    <div>첫번째 축하 글을 남겨주세요</div>
                </div>
                <ul class="list-group p-4 container-list-guestBook">

                </ul>
            </div>
            <div class="d-flex justify-content-center">
                <button id="open-modal" type="button" class="btn btn-outline-primary mt-3" style="width: 300px;" data-bs-toggle="modal" data-bs-target="#addGuestBookModal">작성하기</button>
            </div>
            <nav class="guestBook-nav d-flex justify-content-center" aria-label="Page navigation example">
                <ul class="pagination">
                  <li id="prev" class="page-item "><a class="page-link" href="#">이전</a></li>
                  <li id="next" class="page-item"><a class="page-link" href="#">다음</a></li>
                </ul>
            </nav>
           
        </div>
        
        <!-- <div>
            <button>카카오톡 공유하기</button>
            <button>링크주소 복사하기</button>
        </div>
        
        <address> &copy;저작권 관련 정보를 작성해도 상관 없습니다.</address> -->
    </div>

    <!-- Modal -->
<div class="modal fade" id="addGuestBookModal" tabindex="-1" aria-labelledby="addGuestBookModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" id="dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="addGuestBookModalLabel">방명록 작성하기</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div >
                <div class="text-center">
                    <div class="list-group">
                        <div class="d-flex w-100 justify-content-between">
                            <div onselectstart="return false" class="c-guestbook-modal-wrap">
                                <div class="c-guestbook-modal-inner">
                                    <table>
                                        <colgroup>
                                            <col style="width: 100px;">
                                            <col>
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <th>이름</th>
                                                <td>
                                                    <input class="input-name" type="text" maxlength="12" placeholder="">
                                                </td>
                                            </tr> 
                                            <tr>
                                                <th>내용</th>
                                                    <td colspan="2">
                                                        <textarea class="input-content" maxlength="100" placeholder="100자 이내로 작성해주세요"></textarea>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="closeBtn" type="button" class="btn btn-secondary " data-bs-dismiss="modal">닫기</button>
            <button id="addBtn" type="button" data-bs-dismiss="modal" class="btn btn-submit-guest">작성하기</button>
        </div>


    </div>
</div>
</div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=cfd3ae1e08d110870025655034d912b1"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script type="">
    let btnType;
    let dataId;
    window.document.addEventListener('DOMContentLoaded', () => {
        var container = document.getElementById('map');
        var options = { 
            center: new kakao.maps.LatLng(33.484864594123856, 126.48855923312743), 
            level: 3
        };
        var map = new kakao.maps.Map(container, options); 
        var markerPosition  = new kakao.maps.LatLng(33.484864594123856, 126.48855923312743); 
        var marker = new kakao.maps.Marker({
            position: markerPosition
        });
            
        marker.setMap(map);

        requestList();


        const openModal = document.querySelector('#open-modal');
        const modalElement = document.querySelector('#addGuestBookModal');
        const modalTitle = document.querySelector('#addGuestBookModalLabel');
        const addBtn = document.querySelector('#addBtn');



        openModal.addEventListener('click', (event) => {
            event.preventDefault();
            modalTitle.innerText = '방명록 작성하기';
            addBtn.innerText = '작성하기';
            btnType = 'add';
        }) 

        addBtn.addEventListener('click', async (event) => {
            event.preventDefault();
            const name = document.querySelector('.input-name').value;
            const content = document.querySelector('.input-content').value; // Assuming you have a class 'input-content'
            const url = 'http://localhost:7001';
            const today = moment();
            const formData = new FormData();


            formData.append('name', name);
            formData.append('content', content);
            formData.append('date', today.format('YYYY-MM-DD'));

            if (btnType == 'add') {
                try {
                    await axios.post('http://localhost:7001/guestbook/add', formData, {
                        headers: { 'Content-Type': 'multipart/form-data' }
                    });
                } catch (err) {
                    console.log(err);
                }
            } else if (btnType == 'edit') {
                try {
                    formData.append('id', dataId);
                    await axios.post('http://localhost:7001/guestbook/edit', formData, {
                        headers: { 'Content-Type': 'multipart/form-data' }
                    });
                } catch (err) {
                    console.log(err);
                }
            }
            

            requestList();

        });

    });
    
    
    let isManAccount = false;
    let isWomanAccount = false; 

    function showManTogle() {
        const manEls = document.querySelectorAll('.man-account');
        const arrowUp = document.querySelector('.arrow-up-man');
        arrowUp.classList.toggle('rotate');

        if (isManAccount) {
            isManAccount = false; 
            manEls.forEach(manEl => {
                manEl.style.display = 'none';
                manEl.style.height = '0px';
            });

        } else if (!isManAccount) {
            isManAccount = true;
            manEls.forEach(manEl => {
                manEl.style.display = 'block';
                manEl.style.height = '77px';
            });

        }
    }

    function showWomanToggle() {
        const womanEls = document.querySelectorAll('.woman-account');
        const arrowUp = document.querySelector('.arrow-up-woman');

        arrowUp.classList.toggle('rotate');

        if (isWomanAccount) {
            isWomanAccount = false;
            womanEls.forEach(womanEl => {                
                womanEl.style.display = 'none';
                womanEl.style.height = '0px';
            });


        } else if (!isWomanAccount) {
            isWomanAccount = true;
            womanEls.forEach(womanEl => {                
                womanEl.style.display = 'block';
                womanEl.style.height = '77px';
            });


        }
    }

    const itemsPerPage = 3; // 페이지네이션 개수
    let data; // 응답할 데이터를 쪼개기
    let currentPage = 1; //현재 페이지
    let totalPages; // 총합 페이지

    async function requestList () {
        try {
            const response = await axios.get('http://localhost:7001/guestbook/list');
            totalPages = Math.ceil(response.data.data.length / itemsPerPage);
            data = response.data.data;
            updateContent(currentPage);
            createPagination();
        } catch (err) {
            console.log(err);
        }

    }

    function updateContent(page) {
        const start = (page-1) * itemsPerPage;
        const end = start + itemsPerPage;
        const pageItems = data.slice(start, end);
        const empty = document.querySelector('.empty');

        if (data && data.length > 0) {
                empty.style.display = 'none';

                const ul = document.querySelector('.container-list-guestBook');
                while(ul.firstChild) {
                    ul.firstChild.remove();
                }

                pageItems.forEach(data => {
                    const el = document.querySelector('.container-guestbook'); 
                    el.classList.add('start');

                    const date = moment(data.date).format("YYYY-MM-DD");

                    ul.innerHTML += `<li class="list-group-item list-gusetBook">
                            <div class="ms-2 me-auto">
                                <div class="fw-bold text-start border-bottom d-flex justify-content-between">
                                    <div>${data.name}</div>
                                    <div class="container-btn-guestBook">
                                        <button class="btn guest-btn-edit edit-btn" data-id="${data.id}" data-bs-toggle="modal" data-bs-target="#addGuestBookModal">수정</button>
                                        <button class="btn guest-btn-remove" data-id="${data.id}">삭제</button>
                                    </div>
                                </div>
                                <div class="text-start">${data.content}</div>
                            </div>
                            <div class="text-end">
                            <span>${date}</span>
                            </div>
                        </li>`;
                });

                //  수정 기능 추가
                document.querySelectorAll('.edit-btn').forEach(editBtn => {
                    editBtn.addEventListener('click', async (event) => {
                        event.preventDefault();
                        dataId = event.target.getAttribute('data-id');
                        console.log(dataId);
                        const modalElement = document.querySelector('#addGuestBookModal');
                        const modalTitle = document.querySelector('#addGuestBookModalLabel');
                        modalTitle.innerText = '방명록 수정하기';
                        const addBtn = modalElement.querySelector('#addBtn');
                        addBtn.innerText = '수정하기';
                        btnType = 'edit';

                        try {
                            const response = await axios.get(`http://localhost:7001/guestbook/list/${dataId}`);
                            if (response.data.code == 200) {
                                document.querySelector('.input-name').value = response.data.data[0].name;
                                document.querySelector('.input-content').value = response.data.data[0].content;
                            }
                        } catch (error) {
                            console.log(error);
                        }                     


                    });
                });

                document.querySelectorAll('.guest-btn-remove').forEach(removeBtn => {
                    removeBtn.addEventListener('click', async (event) => {
                        event.preventDefault();
                        const dataId = event.target.getAttribute('data-id');
                        console.log(dataId);

                        try {
                            await axios.delete(`http://localhost:7001/guestbook/remove/${dataId}`);
                            requestList();
                        } catch (error) {
                            console.log(error);
                        }                    
                    });
                });
            } else {
                empty.style.display = 'block';
            }
    }

    function createPagination() {
        const paginationUl = document.querySelector('.pagination');

        while (paginationUl.children.length > 2) {
            paginationUl.removeChild(paginationUl.children[1]);
        }

        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            li.className = 'page-item';
            const a = document.createElement('a');
            a.className = 'page-link';
            a.href = '#';
            a.innerText = i;
            a.addEventListener('click', (e) => changePage(e, i));
            li.appendChild(a);
            paginationUl.insertBefore(li, paginationUl.children[paginationUl.children.length - 1]);
        }

        document.getElementById('prev').addEventListener('click', (e) => changePage(e, currentPage - 1));
        document.getElementById('next').addEventListener('click', (e) => changePage(e, currentPage + 1));
    }

    function changePage(e, page) {
        e.preventDefault();
        if (page < 1 || page > totalPages) {
            return;
        }
        currentPage = page;

        updateContent(page);
    }
    
</script>


        
</body>
</html>